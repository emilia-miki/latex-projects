% we use the 'tcolorbox' package to create most of the formatting
\usepackage[most]{tcolorbox}

% we use 'geometry' package so that we can set the margins to be exactly we eant. In this case, 2.54 cm all around, to match those that MS word uses by default. Note that we set different margins at the top and bottom to take account of the custom header and footer that we are using. 
\usepackage{geometry}
\geometry{
    a4paper,
    left=0.1cm,
    right=0.6cm,
    top=0.1cm,
    bottom=0.1cm
}

% Fonts
\usepackage[TU]{fontenc}
\usepackage{fourier-otf}

% to have awesome icon 
\usepackage{fontawesome5} 
\usepackage{academicons}

% advanced drawing
\usepackage{tikz}
\usepackage{tikz-3dplot}
\usepackage{smartdiagram}
\usepackage{float}
\usepackage{array}
\usetikzlibrary{decorations.text}
\usetikzlibrary{fadings}
\usetikzlibrary{calc}
\usetikzlibrary{shapes.misc,positioning}
\usetikzlibrary{arrows}
\usetikzlibrary{arrows.meta}
\usetikzlibrary{backgrounds} 
\usetikzlibrary{shadings}
\usetikzlibrary{calendar} 
\usetikzlibrary{er}
\usetikzlibrary{patterns}
\usetikzlibrary{shapes} 
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{decorations}
\usetikzlibrary{topaths}
\usepackage{graphicx}

% set TikZ styles
\tikzset{
  contactIcon/.style={%
    minimum height=\baselineskip,
  }
}

% pictures
\usepackage{graphicx}
% loads graphicx, provides align=c option for vertical alignment w.r.t. text
\RequirePackage{graphbox}

% more advanced expressions in \setlength
\usepackage{calc}

% links
\usepackage{hyperref}

% Define Colors
\RequirePackage{xcolor}

\definecolor{secondary}{rgb}{1.0, 0.761, 0.78}
\definecolor{primary}{rgb}{0.831, 0.914, 0.941}
\definecolor{accent}{rgb}{0.604, 0.353, 0.263}

% Define Lengths
\newlength\cvPictureWidth
\setlength\cvPictureWidth{4cm}

% avoid line overflow
% \setlength{\emergencystretch}{2pt}

% CV tag for skills
\newcommand{\cvtag}[1]{%
  \tikz[baseline]\node[anchor=base,draw=black,rounded corners,inner xsep=1ex,inner ysep =0.75ex,text height=1.5ex,text depth=.25ex]{\footnotesize #1};
}

% top box with simple header
\newcommand{\simpleheader}[4]{
\tikz[remember picture,overlay] {%
\node[rectangle, fill=#1, anchor=north, minimum width=\paperwidth, minimum height=3.5cm](header) at (current page.north){};%
\node[draw=none, align=left](name) at (header) {%
{\Huge \color{black} #2 #3 }%
};%
\node[draw=none, below](description) at (name.south) {\color{black}#4};% 
}\vspace{-0.7cm}%
}

% Command Example:
% \simpleheader{titleBackColor}{Name}{Surname}{Job}{textColor}

% Next page header
\newcommand{\newpageheader}[5]{
\tikz[remember picture,overlay] {%
\node[rectangle, fill=#1, anchor=north, minimum width=\paperwidth, minimum height=1.4cm](header) at (current page.north){};%
}\vspace{0cm}%
\begin{tcolorbox}[colback=titleBackColor,boxrule=0pt,frame empty]
\large \textcolor{#5}{#2 \textbf{#3}}
 \hspace*{0.2\textwidth}{\large \textcolor{#5}{#4}}
\hspace*{\fill}{\large \textcolor{#5}{Curriculum Vitae}}
\end{tcolorbox}
}

% SideBar
\newcommand{\sidebar}[1]{
\tikz[remember picture,overlay] {%
\node[rectangle, fill=#1, anchor=north west, minimum width=8.6cm, minimum height=\paperheight](header) at (current page.north west){};%
}
}

% Main Section
\newcommand{\mainsection}[1]{
\tikz[remember picture,overlay] {
  % 12.4cm
  \node[rectangle, fill=#1, anchor=north east, minimum width=\paperwidth, minimum height=12.4cm, yshift=-3.5cm](main-section) at (current page.north east){};
}
\vspace{-0.7cm}%
}

% Flag for Languages section and for all small personal icons
\newcommand{\flag}[1]{\includegraphics[align=c, width=1em]{#1}}

\newcommand{\EducationSection}[4]{
    \adjustbox{valign=t}{
        \begin{minipage}{11cm}
            {\color{accent} \normalsize\bfseries #2}
            \hfill
            \newline
            {\small #3, #4}
            \newline 
            \small\emph{#1}
        \end{minipage}
    }
}

\newcommand{\ExperienceSection}[3]{
    \adjustbox{valign=t}{
        \begin{minipage}{11cm}
            {\color{accent} \bfseries \href{#1}{#2}}
            \vfill
            \smallskip
            \small #3
        \end{minipage}
    }
}

% Publication Section
\newcommand{\publication}[6]{ % Article/Conference, year, name, authors, journal, DOI
    \adjustbox{valign=t}{\begin{minipage}{2.5cm}
    {\small \textbf{#1} \\ \footnotesize #2} \\
    \end{minipage}}
    \hfill
    \adjustbox{valign=t}{\begin{minipage}{8cm}
        {\footnotesize \textbf{#3}, #4, \textit{#5}, \aiDoi \hspace{0.1mm} \href{https://www.doi.org/#6}{#6}}
    \end{minipage}}
}

% ITC section
\newcommand{\ITCcompetence}[2]{ % input: Branch, description
    \adjustbox{valign=t}{\begin{minipage}{2cm}
    \begin{center}
        {\footnotesize \bfseries #1} \\
        \vspace*{0.1cm}
    \end{center}
    \end{minipage}}
    \hfill \vline \hfill
    \adjustbox{valign=t}{\begin{minipage}{8.5cm}
        {\footnotesize #2}
    \end{minipage}}
}

\usepackage{lipsum} % dummy text
\usepackage{adjustbox} % to a better alignement of text

% Format of the title section in the side column
% based on https://tex.stackexchange.com/questions/65731
\makeatletter
\def\cv@hrulefill{{\leavevmode\leaders\hrule height 1pt\hfill\kern\z@}}
% line before and after text (some tweaking is required here)
% based on https://tex.stackexchange.com/questions/15119
\NewDocumentCommand{\ruleline}{m}{\par\noindent\raisebox{\baselineskip/4}{\makebox[\linewidth]{\cv@hrulefill\hspace{1ex}\raisebox{-\baselineskip/4}{\large #1}\hspace{1ex}\cv@hrulefill}}\vspace*{0.05cm}}
\makeatother

\usepackage{titlesec} % Allows creating custom \sections

% Format of the section titles
\titleformat{\section}{
\bf \Large\raggedright}{}{0em}{}[]
\titlespacing{\section}{0pt}{12pt}{5pt} % Spacing around titles {<left spacing>}{<before spacing>}{<after spacing>}

% Multiple Column Package
\usepackage{multicol}

% Generate QR Code from a link
\usepackage{qrcode}

% Info
\title{My CV}
\date{03/10/2022}
\author{pietro.dileo}